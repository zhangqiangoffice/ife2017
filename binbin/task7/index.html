<!DOCTYPE>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
  </head>
  <style type="text/css">
  div {
    border: 1px solid #333;
    padding: 5px 10px;
    margin: 5px;
    display: flex;
    background-color: #fff;
  }
  </style>
<body>
  <div id="root">
    <div>
      <div>
        <div ></div>
        <div></div>
      </div>
      <div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div>
      <div>
        <div></div>
        <div></div>
      </div>
      <div>
        <div></div>
        <div></div>
      </div>
    </div>
  </div>
  <button type="button" id="preOrder">前序遍历</button>
  <button type="button" id="inOrder">中序遍历</button>
  <button type="button" id="postOrder">后序遍历</button>
<script type="text/javascript">
(function(){

  //遍历后的div数组
  var arr = [];
  var i = 0;
  var timerId;

  init();

  //前序遍历
  function preOrder(node) {
    if (node) {
      arr.push(node);
      preOrder(node.children[0]);
      preOrder(node.children[1]);
    }
  }

  //中序遍历
  function inOrder(node) {
    if (node) {
      inOrder(node.children[0]);
      arr.push(node);
      inOrder(node.children[1]);
    }
  }

  //后序遍历
  function postOrder(node) {
    if (node) {
      postOrder(node.children[0]);
      postOrder(node.children[1]);
      arr.push(node);
    }
  }

  //遍历动画
  function cartoon() {
    if (i === 0) {
      arr[i++].style.backgroundColor = "blue";
    } else if (i === arr.length) {
      arr[i - 1].style.backgroundColor = "#fff";
      clearInterval(timerId);
    } else {
      arr[i - 1].style.backgroundColor = "#fff";
      arr[i++].style.backgroundColor = "blue";
    }
  }

  //开始动画
  function start() {
    arr.map((item, index) => {
      item.style.backgroundColor = '#fff';
    })
    var time = 500;
    timerId = setInterval(cartoon, time);
  }

  //处理绑定事件
  function clickHandle(event) {
    clearInterval(timerId);
    var e = event || widow.event;
    var target = e.target || e.srcElement;
    var tarId = target.id;
    var rootDiv = document.querySelector('#root');
    arr = [];
    i = 0;

    switch (tarId) {
      case 'preOrder':
        preOrder(rootDiv);
        break;
      case 'inOrder':
        inOrder(rootDiv);
        break;
      case 'postOrder':
        postOrder(rootDiv);
        break;
      default:
        break;
    }
    start();
  }

  //初始化，绑定点击事件
  function init() {
    document.addEventListener('click', clickHandle, false)
  }

})()
</script>
</body>
</html>